<%- include("./layouts/header") %> <%- include("./layouts/sidebar") %>

<div class="content-body">
  <div class="container-fluid">
    <div class="row page-titles">
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a href="/admin/dashboard">Dashboard</a>
        </li>
        <li class="breadcrumb-item active">Contact Page Settings</li>
      </ol>
    </div>

    <!-- Flash Messages -->
    <% if (messages?.success) { %>
    <div class="alert alert-success alert-dismissible fade show shadow-sm">
      <i class="fas fa-check-circle me-2"></i><%= messages.success %>
      <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
    <% } %> <% if (messages?.error) { %>
    <div class="alert alert-danger alert-dismissible fade show shadow-sm">
      <i class="fas fa-exclamation-triangle me-2"></i><%= messages.error %>
      <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
    <% } %>

    <div class="row">
      <div class="col-12">
        <div class="card border-0 shadow-sm">
          <div class="card-header bg-primary text-white">
            <h4 class="card-title mb-0">
              <i class="fas fa-edit me-2"></i> Edit Contact Page
            </h4>
          </div>
          <div class="card-body p-4 p-lg-5">
            <form
              action="/admin/contact-settings"
              method="POST"
              enctype="multipart/form-data"
              id="contactSettingsForm"
            >
              <!-- Contact Details Section -->
              <div class="setting-section mb-5">
                <h5 class="section-title mb-4 text-primary">
                  <i class="fas fa-map-marker-alt me-2"></i>Our Contact Details
                </h5>
                <div class="row g-4">
                  <!-- Location -->
                  <div class="col-lg-4">
                    <h6 class="fw-bold">Location</h6>
                    <label class="form-label fw-bold">Image</label>
                    <input
                      type="file"
                      name="location_image"
                      class="form-control"
                      accept="image/*"
                    />
                    <% if (setting.location_image) { %>
                    <div class="mt-3 text-center">
                      <img
                        src="/uploads/<%= setting.location_image %>"
                        class="img-thumbnail rounded shadow-sm"
                        width="220"
                        alt="Location"
                      />
                      <p class="text-muted small mt-2">Current Image</p>
                    </div>
                    <% } %>
                    <label class="form-label fw-bold mt-3">Address</label>
                    <textarea
                      name="location_address"
                      class="form-control"
                      rows="3"
                    >
<%= setting.location_address || '' %></textarea
                    >
                  </div>

                  <!-- Phone -->
                  <div class="col-lg-4">
                    <h6 class="fw-bold">Phone Number</h6>
                    <label class="form-label fw-bold">Image</label>
                    <input
                      type="file"
                      name="phone_image"
                      class="form-control"
                      accept="image/*"
                    />
                    <% if (setting.phone_image) { %>
                    <div class="mt-3 text-center">
                      <img
                        src="/uploads/<%= setting.phone_image %>"
                        class="img-thumbnail rounded shadow-sm"
                        width="220"
                        alt="Phone"
                      />
                      <p class="text-muted small mt-2">Current Image</p>
                    </div>
                    <% } %>
                    <label class="form-label fw-bold mt-3">Phone Number</label>
                    <input
                      type="text"
                      name="phone_number"
                      class="form-control"
                      value="<%= setting.phone_number || '' %>"
                    />
                  </div>

                  <!-- Email -->
                  <div class="col-lg-4">
                    <h6 class="fw-bold">Email</h6>
                    <label class="form-label fw-bold">Image</label>
                    <input
                      type="file"
                      name="email_image"
                      class="form-control"
                      accept="image/*"
                    />
                    <% if (setting.email_image) { %>
                    <div class="mt-3 text-center">
                      <img
                        src="/uploads/<%= setting.email_image %>"
                        class="img-thumbnail rounded shadow-sm"
                        width="220"
                        alt="Email"
                      />
                      <p class="text-muted small mt-2">Current Image</p>
                    </div>
                    <% } %>
                    <label class="form-label fw-bold mt-3">Email Address</label>
                    <input
                      type="email"
                      name="email"
                      class="form-control"
                      value="<%= setting.email || '' %>"
                    />
                  </div>
                </div>
              </div>

              <hr class="my-5" />

              <!-- Google Maps Embed URL -->
              <div class="setting-section mb-5">
                <h5 class="section-title mb-4 text-primary">
                  <i class="fas fa-map me-2"></i>Google Maps Embed URL
                </h5>
                <div class="row g-4">
                  <div class="col-lg-12">
                    <label class="form-label fw-bold"
                      >Map Embed URL (src only)</label
                    >
                    <input
                      type="text"
                      name="map_url"
                      class="form-control"
                      value="<%= setting.map_url || '' %>"
                      placeholder="https://www.google.com/maps/embed?pb=!1m18!..."
                    />
                    <div class="form-text mt-2">
                      Paste only the <code>src</code> URL from Google Maps embed
                      iframe.<br />
                      Example:
                      <code>https://www.google.com/maps/embed?pb=...</code>
                    </div>
                  </div>
                </div>
              </div>

              <hr class="my-5" />

              <!-- Submit Button -->
              <div class="text-center mt-5">
                <button
                  type="submit"
                  class="btn btn-primary btn-lg px-6 shadow-lg hover-lift"
                >
                  <i class="fas fa-save me-2"></i> Save All Changes
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .setting-section {
    background: #f8f9fa;
    padding: 2rem;
    border-radius: 12px;
    border-left: 5px solid #0d6efd;
    transition: all 0.3s ease;
  }
  .setting-section:hover {
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
    transform: translateY(-2px);
  }
  .section-title {
    font-size: 1.4rem;
    font-weight: 600;
    color: #2c3e50;
  }
  .hover-lift {
    transition: all 0.3s ease;
  }
  .hover-lift:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 35px rgba(13, 110, 253, 0.3) !important;
  }
  .img-thumbnail {
    transition: transform 0.3s ease;
  }
  .img-thumbnail:hover {
    transform: scale(1.05);
  }
</style>

<%- include("./layouts/footer") %>
